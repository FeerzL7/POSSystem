<UserControl x:Class="POSSystem.Presentation.WPF.Views.CajaView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="{StaticResource BackgroundColor}">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Título -->
        <TextBlock Grid.Row="0" 
                  Text="GESTIÓN DE CAJA" 
                  Style="{StaticResource TitleStyle}"/>

        <!-- Contenido -->
        <Border Grid.Row="1" Style="{StaticResource CardStyle}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Panel Izquierdo - Controles -->
                <StackPanel Grid.Column="0" Margin="20">
                    <TextBlock Text="Información de Caja" 
                              Style="{StaticResource SubtitleStyle}"/>

                    <!-- Número de Caja -->
                    <Label Content="Número de Caja:" Style="{StaticResource BaseLabelStyle}"/>
                    <TextBox Text="{Binding NumeroCaja}" 
                            Style="{StaticResource BaseTextBoxStyle}"
                            IsEnabled="{Binding CajaAbierta, Converter={StaticResource InverseBoolConverter}}"/>

                    <!-- Fondo Inicial -->
                    <Label Content="Fondo Inicial:" Style="{StaticResource BaseLabelStyle}" Margin="0,10,0,0"/>
                    <TextBox Text="{Binding FondoInicial}" 
                            Style="{StaticResource BaseTextBoxStyle}"
                            IsEnabled="{Binding CajaAbierta, Converter={StaticResource InverseBoolConverter}}"/>

                    <!-- Saldo Actual -->
                    <Label Content="Saldo Actual:" Style="{StaticResource BaseLabelStyle}" Margin="0,10,0,0"/>
                    <TextBlock Text="{Binding SaldoActual, StringFormat=C}" 
                              FontSize="24" 
                              FontWeight="Bold"
                              Foreground="{StaticResource PrimaryColor}"
                              Margin="10"/>

                    <Separator Margin="0,20"/>

                    <!-- Botones de Acción -->
                    <Button Content="ABRIR CAJA" 
                           Style="{StaticResource SuccessButtonStyle}"
                           Command="{Binding AbrirCajaCommand}"
                           Height="50"
                           FontSize="16"
                           Margin="0,10"/>

                    <Button Content="CERRAR CAJA" 
                           Style="{StaticResource ErrorButtonStyle}"
                           Command="{Binding CerrarCajaCommand}"
                           Height="50"
                           FontSize="16"
                           Margin="0,10"/>

                    <Button Content="REGISTRAR RETIRO" 
                           Style="{StaticResource WarningButtonStyle}"
                           Command="{Binding RegistrarRetiroCommand}"
                           Height="45"
                           FontSize="14"
                           Margin="0,10"/>
                </StackPanel>

                <!-- Panel Derecho - Estado -->
                <StackPanel Grid.Column="1" Margin="20">
                    <TextBlock Text="Estado" Style="{StaticResource SubtitleStyle}"/>

                    <Border Background="{StaticResource CardColor}" 
                           BorderBrush="{StaticResource BorderColor}"
                           BorderThickness="1"
                           CornerRadius="4"
                           Padding="20"
                           Margin="0,10">
                        <StackPanel>
                            <TextBlock Text="Estado de la Caja:" 
                                      FontWeight="Bold" 
                                      FontSize="14"/>
                            <TextBlock Text="{Binding CajaAbierta, Converter={StaticResource BoolToEstadoConverter}}" 
                                      FontSize="20" 
                                      FontWeight="Bold"
                                      Foreground="{StaticResource SuccessColor}"
                                      Margin="0,5"/>

                            <Separator Margin="0,20"/>

                            <TextBlock Text="{Binding MensajeEstado}" 
                                      FontSize="14"
                                      TextWrapping="Wrap"
                                      Margin="0,10"/>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</UserControl>